@using Core.Domains
@model PTS.Models.AccountUser


@*@{
    ViewBag.Title = "Manage Account";
}*@


<hgroup class="title">
    <h4>Account</h4>
</hgroup>

<div  class="contact">
    <form id="UserAccount">
        @*@Html.HiddenFor(model => model.Id)*@
        <div class="row">
            <div class="col-md-1">
                <p><span class="label">First Name:</span></p>

            </div>
            <div class="col-md-1 col-md-offset-1">
                <span><input name="FirstName" disabled="disabled" style="width:auto" class="form-control" value=@Model.FirstName /></span>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
                <p>
                    <span class="label">Last Name:</span>
                </p>
            </div>
            <div class="col-md-1 col-md-offset-1">
                <span><input name="LastName" disabled="disabled" style="width: auto" class="form-control" value=@Model.LastName /></span>
            </div>
        </div>

        <div class="row">
            <div class="col-md-1">
                <p>
                    <span class="label">E-Mail:</span>
                </p>
            </div>
            <div class="col-md-1 col-md-offset-1">
                <span><input name="Email" disabled="disabled" style="width: auto" class="form-control" value=@Model.Email /></span>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
                <p>
                    <span class="label">Major:</span>
                </p>
            </div>
            <div class="col-md-1 col-md-offset-1">
                <span><input disabled="disabled" style="width: auto" class="form-control" name="Major" value=@Model.Major /></span>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
                <p>
                    <span class="label">Education:</span>
                </p>
            </div>
            <div class="col-md-1 col-md-offset-1">
                <span><input disabled="disabled" style="width: auto" class="form-control" name="Education" value=@Model.Education /></span>
            </div>
        </div>
    </form>
    <form id="Userlocation">
        <div class="row">
            <div class="col-md-1">
                <p>
                    <span class="label">Address:</span>
                </p>
            </div>
            <div class="col-md-1 col-md-offset-1">
                <label>Address</label>
                <span><input name="Address" disabled="disabled" style="width: auto" class="form-control" value=@Model.Location.Address /></span>
            </div>
            <div class="col-md-1 col-md-offset-2">
                <label>City</label>
                <span><input name="City" disabled="disabled" style="width: auto" class="form-control" value=@Model.Location.City /></span>
            </div>
            <div class="col-md-1 col-md-offset-2">
                <label>State</label>
                <span><input name="State" disabled="disabled" style="width: auto" class="form-control" value=@Model.Location.State /></span>
            </div>
        </div>

        <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-md-1 col-md-offset-1">
                <label>Zip</label>
                <span><input name="ZipCode" disabled="disabled" style="width: auto" class="form-control" value=@Model.Location.ZipCode /></span>
            </div>
            <div class="col-md-1 col-md-offset-2">
                <label>Country</label>
                <span><input name="Country" disabled="disabled" style="width: auto" class="form-control" value=@Model.Location.Country /></span>
            </div>
        </div>
    </form>
        <button id="EditUserButton" class="btn btn-primary">Edit User Info</button>
        <button id ="SaveUserButton" style="visibility:hidden" class="btn btn-primary">Save User Info</button>
    
</div>

<div class="contact teacherContact" id="teacherForm">
    <header>
        <h6>Teacher</h6>
    </header>
    <form id="UserAccountTeacher">

        <div class="row">
            <div class="col-md-1">
                <p>
                    <span class="label">Hourly Rate:</span>
                </p>
            </div>
            <div class="col-md-1 col-md-offset-1">
                <span><input name="HourlyRate" disabled="disabled" style="width: auto" class="form-control" value=@Model.HourlyRate /></span>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
                <p>
                    <span class="label">Class Rate:</span>
                </p>
            </div>
            <div class="col-md-1 col-md-offset-1">
                <span><input name="ClassRate" disabled="disabled" style="width: auto" class="form-control" value=@Model.ClassRate /></span>
            </div>
        </div>
        </form>
        <button id="EditTeacherButton" class="btn-primary btn">Edit Teacher Info</button>
        <button id="SaveTeacherButton" style="visibility:hidden" class="btn btn-primary">Save Teacher Info</button>
</div>

<script type="text/javascript">
    $(document).ready(function() {
        if ("@Model.Role" != "@UserRole.Teacher") {
            console.log("its not");
            $("#teacherForm").hide();
        } else {
            console.log("it is!");
            $("#teacherForm").show();
        }
        });
    
    $('#EditUserButton').on('click', function(event) {
        event.preventDefault();
        $('#UserAccount').find(':input').prop('disabled', '');
        $('#Userlocation').find(':input').prop('disabled', '');
        $('#EditUserButton').hide();
        $('#SaveUserButton').css('visibility', 'visible');
    });

    $('#EditStudentButton').on('click', function(event) {
        event.preventDefault();
        $('#UserAccountStudent').find(':input').prop('disabled', '');
        $('#EditStudentButton').hide();
        $('#SaveStudentButton').css('visibility', 'visible');
    });

    $('#EditTeacherButton').on('click', function(event) {
        event.preventDefault();
        $('#UserAccountTeacher').find(':input').prop('disabled', '');
        $('#EditTeacherButton').hide();
        $('#SaveTeacherButton').css('visibility', 'visible');
    });

    @*$('#SaveStudentButton').on('click', function(event) {
        $.ajax({
            url: '@Url.Action("SaveStudentUser")',
            data: $('#UserAccountStudent').serialize(),
            success: function () {
                $('#UserAccountStudent').find(':input').prop('disabled', 'disabled');
                $('#EditStudentButton').show();
                $('#SaveStudentButton').css('visibility', 'hidden');
            }

        });
    });*@

    $('#SaveTeacherButton').on('click', function (event) {
        event.preventDefault();
        
        $.ajax({
            url: '@Url.Action("SaveTeacherUser")',
            type:'post',
            data: $('#UserAccountTeacher').serialize(),
            success: function () {
                $('#UserAccountTeacher').find(':input').prop('disabled', 'disabled');
                $('#EditTeacherButton').show();
                $('#SaveTeacherButton').css('visibility', 'hidden');
            }

        });
    });

    $('#SaveUserButton').on('click', function (event) {
        event.preventDefault();

        $.ajax({
            url: '@Url.Action("SaveUserLocation")',
            data: $('#Userlocation').serialize(),
            type: 'post',
            success: function () {
            }

        });

        $.ajax({
            url: '@Url.Action("SaveUser")',
            data: $('#UserAccount').serialize(),
            type:'post',
            success: function () {
                $('#UserAccount').find(':input').prop('disabled', 'disabled');
                $('#Userlocation').find(':input').prop('disabled', 'disabled');
                $('#EditUserButton').show();
                $('#SaveUserButton').css('visibility', 'hidden');
            }

        });
    });

</script>